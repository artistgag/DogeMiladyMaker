"use strict";import{Hr,Br,TextNoWallet,TextInstallWallet,TextWrongChain,NoFounds,MiladyText,MiniHeader,WhitelistedNotice,WalletNotice,NoWalletNotice}from"./components.js";const e=React.createElement,useState=React.useState,useEffect=React.useEffect,mint=document.querySelector("#mint"),ConnectAndMint=()=>{const[t,n]=useState(!1),[a,o]=useState(!1),[i,s]=useState(0),[l,c]=useState(""),[r,d]=useState(!1),[u,m]=useState(null),[w,B]=useState(null),[N,h]=useState(null),[y,p]=useState(!1),[M,S]=useState(!1),[f,b]=useState(!1);useEffect((()=>{let e=new XMLHttpRequest;e.open("GET","https://api.etherscan.io/api?module=proxy&action=eth_getStorageAt&address=0x5af0d9827e0c53e4799bb226655a1de152a425a5&position=0x2&tag=latest&apikey=N6RBJJAAQK1YWA66IE1KZ8T5SRGRCR4W9T"),e.send(),e.onload=()=>{if(200==e.status){const t=JSON.parse(e.response).result;0==isNaN(parseInt(t))&&(h(parseInt(t)),console.log("Total Supply: "+parseInt(t)))}else{let e=new XMLHttpRequest;e.open("GET","total_supply.txt"),e.send(),e.onload=()=>{const t=JSON.parse(e.response);h(t),console.log("Total Supply: "+t)}}}}),[]);const[g,T]=useState(0);async function x(){if(void 0!==window.web3)window.web3=new Web3(window.ethereum);else{const t=document.querySelector("#mint");t&&ReactDOM.render(e("div",{className:"centered-text"},MiladyText(),Br(),MiniHeader(N),Br(),H(),Br(),Br(),TextNoWallet(),Br(),C(1),C(5),C(15),C(30),Br()),t)}window.ethereum.enable().then((e=>{window.web3.eth.net.getId().then((e=>{s(e)})),window.web3.eth.net.getNetworkType().then((e=>{c(e)}));let t=e[0];m(t),o(!0),async function(e){const t=new window.web3.eth.Contract(ABI,ADDRESS);B(t);const n=await t.methods.totalSupply().call();h(n);const a=await t.methods.saleIsActive().call();p(a);const o=await t.methods.whitelistOneMint(e).call();S(o);const i=await t.methods.whitelistTwoMint(e).call();b(i)}(t)})).catch((e=>{console.error(e)}))}async function W(){o(!1)}function v(e){return 30===e?BigNumber("60000000000000000"):15===e?BigNumber("70000000000000000"):5===e?BigNumber("75000000000000000"):BigNumber("80000000000000000")}useEffect((()=>{(async()=>{if(void 0!==window.web3)window.web3=new Web3(window.ethereum),n(!0);else{n(!1);document.querySelector("#NoWallet")}const e=new window.web3.eth.Contract(ABI,ADDRESS);B(e);const t=await e.methods.totalSupply().call();h(t);const a=await e.methods.saleIsActive().call();p(a)})()}),[]);const H=()=>e("button",{className:"connect-button",onClick:x},"Connect to MetaMask"),A=()=>e("button",{className:"connect-button",onClick:W},"Disconnect from MetaMask"),R=t=>{const n=v(t).dividedBy("1e18"),o=n.multipliedBy(t),i=`Mint ${t} Milady${t>1?"s":""} - ${o} ETH (${n} each)`;return e("div",{className:"mint-button"},a?e("button",{onClick:()=>async function(t){if(!w)return;const n=v(t).multipliedBy(t).toString();console.log(n);const a=await web3.eth.getGasPrice();console.log("Gas Price: "+a);var o=await w.methods.mintMiladys(t).estimateGas({from:u,value:n},(n=>{if(n){const n=document.querySelector("#mint");ReactDOM.render(e("div",{className:"centered-text"},MiladyText(),Br(),MiniHeader(N),Br(),A(),Br(),Br(),WalletNotice(u),Br(),NoFounds(t),Br(),R(1),R(5),R(15),R(30),Br()),n)}}));if(console.log("Gas Amount: "+o),a&&o)try{w.methods.mintMiladys(t).send({from:u,value:n,gas:o,gasPrice:a}).on("transactionHash",(e=>{console.log("transactionHash",e)}))}catch(e){alert(JSON.stringify(e))}}(t)},i):i)},C=t=>{const n=v(t).dividedBy("1e18"),a=n.multipliedBy(t);return e("div",{className:"mint-button"},`Mint ${t} Milady${t>1?"s":""} - ${a} ETH (${n} each)`)};if(mint)return a||t?!a&&t?e("div",{className:"centered-text"},MiladyText(),Br(),MiniHeader(N),Br(),H(),Br(),Br(),NoWalletNotice(),Br(),C(1),C(5),C(15),C(30),Br()):a&&t&&i!=CHAINID?e("div",{className:"centered-text"},MiladyText(),Br(),MiniHeader(N),Br(),H(),Br(),Br(),TextWrongChain(),Br(),C(1),C(5),C(15),C(30),Br()):e("div",null,MiladyText(),Br(),MiniHeader(N),Br(),A(),Br(),Br(),WalletNotice(u),Br(),R(1),R(5),R(15),R(30),e("div",{className:"whitelisted-notices"},M?WhitelistedNotice(1):null,f?WhitelistedNotice(2):null)):e("div",{className:"centered-text"},MiladyText(),Br(),MiniHeader(N),Br(),H(),Br(),Br(),NoWalletNotice(),Br(),C(1),C(5),C(15),C(30),Br())};mint&&ReactDOM.render(e((()=>ConnectAndMint())),mint);